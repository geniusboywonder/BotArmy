{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "BotArmyAgentHandoff",
  "type": "object",
  "properties": {
    "handoff_id": {
      "type": "string",
      "description": "Unique ID for this handoff, e.g., UUID"
    },
    "from_agent": {
      "type": "string",
      "enum": [
        "ProductOwnerAgent",
        "RequirementsSpecificationAgent",
        "DesignArchitectureAgent",
        "FrontendDeveloperAgent",
        "BackendDeveloperAgent",
        "TestingQAAgent",
        "DeploymentAgent"
      ]
    },
    "to_agent": {
      "type": "string",
      "enum": [
        "ProductOwnerAgent",
        "RequirementsSpecificationAgent",
        "DesignArchitectureAgent",
        "FrontendDeveloperAgent",
        "BackendDeveloperAgent",
        "TestingQAAgent",
        "DeploymentAgent"
      ]
    },
    "handoff_type": {
      "type": "string",
      "enum": [
        "vision_scope",
        "requirements_package",
        "design_package",
        "frontend_code_package",
        "backend_code_package",
        "test_results_package",
        "deployment_package",
        "conflict_escalation"
      ]
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+(\\.\\d+)?$"
    },
    "status": {
      "type": "string",
      "enum": [
        "draft",
        "ready_for_review",
        "approved",
        "rejected_with_comments",
        "awaiting_acknowledgement"
      ]
    },
    "dependencies": {
      "type": "array",
      "items": { "type": "string" },
      "description": "IDs of other handoffs that must be completed before this one"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "content": {
      "type": "object",
      "description": "Main payload for this handoff, format depends on handoff_type",
      "properties": {
        "functional_requirements": { "type": "array", "items": { "type": "string" } },
        "non_functional_requirements": { "type": "array", "items": { "type": "string" } },
        "constraints": { "type": "array", "items": { "type": "string" } },
        "open_questions": { "type": "array", "items": { "type": "string" } },
        "ui_wireframes": { "type": "array", "items": { "type": "string", "description": "Links to wireframe images" } },
        "architecture_docs": { "type": "array", "items": { "type": "string", "description": "Links to design docs" } },
        "frontend_files": { "type": "array", "items": { "type": "object" } },
        "backend_files": { "type": "array", "items": { "type": "object" } },
        "test_cases": { "type": "array", "items": { "type": "string" } },
        "test_results": { "type": "array", "items": { "type": "object" } },
        "deployment_notes": { "type": "string" },
        "urls": { "type": "array", "items": { "type": "string", "format": "uri" } },
        "conflict_details": {
          "type": "object",
          "properties": {
            "issue_summary": { "type": "string" },
            "agent_positions": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "agent": { "type": "string" },
                  "position": { "type": "string" },
                  "pros": { "type": "array", "items": { "type": "string" } },
                  "cons": { "type": "array", "items": { "type": "string" } }
                },
                "required": ["agent", "position"]
              }
            }
          },
          "required": ["issue_summary", "agent_positions"]
        }
      }
    }
  },
  "required": [
    "handoff_id",
    "from_agent",
    "to_agent",
    "handoff_type",
    "version",
    "status",
    "timestamp",
    "content"
  ]
}
